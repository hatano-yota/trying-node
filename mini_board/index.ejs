<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" http-equiv="content-type" content="text/html" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ミニメッセージボード</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      crossorigin="anonymous"
    />
    <script>
      const init = () => {
        const id = localStorage.getItem("id");
        if (id === null) {
          location.href = "./login";
        }
        document.querySelector("#id").textContent = "ID:" + id;
        document.querySelector("#id_input").value = id;
      };
    </script>
  </head>
  <body class="container" onload="init();">
    <header><h1 class="display-4">メッセージボード</h1></header>
    <main>
      <p>※メッセージは最大10個まで補完されます。</p>
      <form action="/" method="post">
        <p id="id"></p>
        <input type="hidden" id="id_input" name="id" />
        <div class="form-group">
          <label for="msg">Message</label>
          <input type="text" name="msg" id="msg" class="form-control" />
        </div>
        <input type="submit" value="送信" class="btn btn-primary" />
      </form>
      <table class="table">
        <% for(let i in data) { %> <%- include('data_item', {val:data[i]}) %> <% } %>
      </table>
    </main>
  </body>
</html>
